---
phase: 01-foundation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/app/board/page.tsx
autonomous: true

must_haves:
  truths:
    - "User can drag tasks between columns without blocking modals"
    - "Incomplete tasks can move to any column freely"
    - "Themes are optional - tasks without themes work normally"
    - "Initiatives are optional - tasks without initiatives work normally"
    - "Visual warning shows for incomplete tasks (non-blocking)"
  artifacts:
    - path: "frontend/app/board/page.tsx"
      provides: "Frictionless board with non-blocking drag-drop"
      contains: "onDragEnd"
  key_links:
    - from: "frontend/app/board/page.tsx"
      to: "frontend/lib/api.ts"
      via: "updateTask call"
      pattern: "updateTask\\("
---

<objective>
Remove drag-drop gating modals and make board interactions frictionless

Purpose: The current board blocks drag operations with a modal when tasks lack value/effort scores, breaking flow and creating friction. ADHD users lose context when interrupted by modals. This plan removes all blocking gates while preserving visual feedback about incomplete tasks.

Output: A board page where any task can be dragged to any column without interruption. Incomplete tasks show a non-blocking visual indicator (icon/badge) instead of modal. Themes and initiatives are treated as optional throughout.
</objective>

<execution_context>
@/home/rbrown/.claude/get-shit-done/workflows/execute-plan.md
@/home/rbrown/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation/01-RESEARCH.md

# Existing files to modify
@frontend/app/board/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove drag-drop gating logic</name>
  <files>frontend/app/board/page.tsx</files>
  <action>
Modify the `onDragEnd` function in board/page.tsx to remove all blocking validation:

1. **Remove the gating check entirely** (lines ~62-68 in current code):
```typescript
// DELETE THIS BLOCK:
// if (source.droppableId === 'backlog' && destination.droppableId !== 'backlog') {
//     const effort = task.effort_score ?? task.estimated_duration
//     const isValid = task.value_score > 0 && effort && effort > 0
//     if (!isValid) {
//         setEditingTask(task) // Open Modal
//         return // Cancel drop visually
//     }
// }
```

2. **Keep the rest of onDragEnd** - optimistic update and API call remain unchanged

3. **Add toast feedback** instead of modal:
   - Import `toast` from sonner (if not installed, use a simple inline notification)
   - After successful drag, show brief success: `toast.success('Task moved', { duration: 1500 })`
   - On API error, show error toast and revert

The key change: Tasks can now move freely. No validation stops the drag.
  </action>
  <verify>
- Drag task from Threshold (backlog) to theme column - should move immediately
- Drag incomplete task (no value/effort) - should move without modal
- Check console for API errors after drag
  </verify>
  <done>
Drag-drop works without blocking modals. Any task can move to any column instantly.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add non-blocking visual indicator for incomplete tasks</name>
  <files>frontend/app/board/page.tsx</files>
  <action>
Enhance the task card rendering to show a non-blocking visual indicator for tasks missing recommended fields:

1. **Keep existing warning indicator** (lines ~247-251) but make it always visible (not just on hover):
```typescript
{/* Missing Data Indicator - always visible, non-blocking */}
{task.status !== 'done' && (!task.value_score || !(task.effort_score ?? task.estimated_duration)) && (
  <div className="mt-2 text-[10px] text-orange-500 flex items-center gap-1">
    <AlertTriangle size={10} />
    <span>Missing details</span>
  </div>
)}
```

2. **Remove opacity-0 group-hover:opacity-100** from the warning - make it always visible
   - This provides constant feedback without interrupting flow
   - Users see which tasks need attention but aren't blocked from working

3. **Add subtle border styling** for incomplete tasks in non-backlog columns:
```typescript
className={`... ${
  task.status !== 'done' &&
  col.id !== 'backlog' &&
  (!task.value_score || !(task.effort_score ?? task.estimated_duration))
    ? 'border-orange-200'
    : 'border-gray-200'
}`}
```

This creates visual hierarchy:
- Complete tasks: normal appearance
- Incomplete tasks in backlog: warning text
- Incomplete tasks moved to themes: warning text + orange border (suggesting attention needed)
  </action>
  <verify>
- Incomplete task in backlog shows warning icon and text (always visible)
- Drag incomplete task to theme column - shows orange border + warning
- Complete task or task with all fields - no warning styling
  </verify>
  <done>
Incomplete tasks show non-blocking visual indicators (icon + text always visible, orange border when in theme columns).
  </done>
</task>

<task type="auto">
  <name>Task 3: Ensure themes and initiatives are optional in edit modal</name>
  <files>frontend/app/board/page.tsx</files>
  <action>
Modify the edit modal to treat themes AND initiatives as optional (addresses SIMPLIFY-01 for both):

1. **Keep the editingTask modal** - but it's now only triggered by clicking a task (for editing), NOT by drag-drop failures

2. **Make all fields in the modal optional** (remove required attributes):
```typescript
// Change these inputs from required to optional:
<input
  type="number" min="1" max="100"
  className="w-full p-2 border rounded-lg"
  value={editingTask.value_score || ''}
  onChange={e => setEditingTask({...editingTask, value_score: parseInt(e.target.value) || 0})}
  // REMOVED: required
/>
```

3. **Add helpful messaging** to the modal header:
```typescript
<h3 className="text-lg font-bold mb-1">Edit Task</h3>
<p className="text-sm text-gray-500 mb-4">All fields are optional. Add details when you're ready.</p>
```

4. **Remove the required validation** from saveTaskDetails - allow saving with any fields empty

5. **Verify theme/initiative dropdowns allow "None" selection:**
   - If theme dropdown exists, ensure it has an empty/null option: "No theme"
   - If initiative dropdown exists, ensure it has an empty/null option: "No initiative"
   - Tasks without theme_id or initiative_id should save successfully

6. **Check for any validation that requires theme or initiative:**
   - Search for `theme_id` validation - remove any required checks
   - Search for `initiative_id` validation - remove any required checks
   - Both should be nullable/optional in all form logic

The modal is now a convenience for editing, not a blocker. Users can:
- Click a task to edit it (optional)
- Drag tasks freely regardless of field completion
- Fill in details when they have time/energy
- Leave theme and initiative empty indefinitely
  </action>
  <verify>
- Click on task opens edit modal
- Modal shows "All fields optional" message
- Can save task with empty value/effort fields
- Can save task with no theme selected
- Can save task with no initiative selected
- Drag-drop still works independently of modal
- Tasks without theme_id display correctly in Threshold column
  </verify>
  <done>
Edit modal is an optional enhancement - all fields including theme and initiative are optional, helpful messaging, no required validation blocking saves.
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. Start frontend dev server: `cd /home/rbrown/workspace/liminal/frontend && npm run dev`
2. Navigate to /board
3. Create a task with only title (no value/effort/theme/initiative) via dashboard
4. Return to board - task should be in Threshold with warning indicator
5. Drag task to a theme column - should move instantly (no modal!)
6. Task in theme column shows orange border + warning
7. Click task to edit - modal opens with optional fields
8. Verify theme dropdown has "No theme" option
9. Verify initiative dropdown has "No initiative" option (if present)
10. Save without filling any fields - should succeed
</verification>

<success_criteria>
- [ ] Drag-drop works without any blocking modals
- [ ] Incomplete tasks can move between all columns freely
- [ ] Visual warning (icon + text) shows for tasks missing fields
- [ ] Orange border indicates incomplete tasks in theme columns
- [ ] Edit modal makes all fields optional with helpful messaging
- [ ] Themes are optional - "No theme" option available (SIMPLIFY-01)
- [ ] Initiatives are optional - "No initiative" option available (SIMPLIFY-01)
- [ ] Tasks without theme or initiative save and display correctly
- [ ] No functionality regression - tasks still update in API on drag
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-02-SUMMARY.md`
</output>
